<!doctype html>
<html lang="fr">
<head>
  <style>
    p.ex1 {
      font-size: 100px;
    }   
    h1 {
      font-size: 40px;
    }
    
    
  </style>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  
  
  <title>Titre de la page</title>
  <link rel="stylesheet" href="style.css">
  <!-- <script src="script.js"></script> -->
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
  <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>

  
  
  <!-- <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"> -->
  
  
  <script type = "text/javascript" async=false>
    function fun() {
      alert (" Reste a faire: \n Tester d'autres comptes  \n detecter la colonne de communication \n mettre js dans Git");
    }
    
  </script> 
  
  
  
</head>
<body onload="onLoadcheckCookie()">
  
   <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a href="#" class="navbar-brand mr-3">MyMoney</a>
      <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav">
          <a href="#" class="nav-item nav-link active">Home</a>
          <a href="km/Kilometrage.html" class="nav-item nav-link">Services</a>
          <a href="#" class="nav-item nav-link" onclick="about_info();">About</a>
          <a href="#" class="nav-item nav-link">Contact</a>
        </div>
        <div class="navbar-nav ml-auto">
          <a href="#" class="nav-item nav-link">Register</a>
          <a href="#" class="nav-item nav-link">Login</a>
        </div>
      </div>
    </div>    
  </nav>
  
  
  
  
  <div class="alert alert-danger alert-dismissible" role="alert" id="cookie_Alert">
    <strong>Activez les Cookie!</strong> Afin d'utiliser cet outil.
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="alert alert-warning alert-dismissible" role="alert" id="km_Alert">
    <strong>Bonjour </strong>Vous n'avez pas encore encodé des KM.
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  
  <div class="container">
    <div class="row">
      <form class="row g-3">
        
        
        <div class="container overflow-hidden">
          <div class="row gy-5">
            
            <div class="col-md-4">
              <h1 style="color: cadetblue; font-size:75px" id="kmDash">251266</h1>
            </div>
            <div class="col-md-2">
              <h1 style="color:black; font-size:35px">km</h1>
            </div>
          </div>
        </div>
        
        
        <!-- <div class="btn-group" data-toggle="buttons">           -->
          <!-- <button class="btn btn-info btn-block" type='button' id="manuelInput">Encoder manuellement</button> -->
          
          <button class="btn btn-primary col  btn-lg" type='button' id="manuelInput"  data-toggle="modal" data-target="#inputkm_modal">Encoder manuellement</button>
          <!-- <div class="col-lg-2 col-md-1"></div> -->
          <button type='button' btn-block class="btn btn-danger col  btn-lg" id="start_camera">Start/Stop ticket scan</button>
          <div class="col-lg-2 col-md-1"></div>
          <button class="btn btn-info col  btn-lg" type="submit"  onclick="demoFromHTML();" >Imprimer</button>  
          <!-- </div> -->
          
          
          <!-- Modal -->
          <div class="modal fade" id="inputkm_modal" role="dialog">
            <div class="modal-dialog">
              
              <!-- Modal content-->
              <div class="modal-content">
                <div class="modal-header">
                  <!-- <h4 class="modal-title">Encoder vos Kilomètre</h4> -->
                  <button type="button" class="close col-md-1" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <div class="col-md-4">
                      <label for="KmInput" class="form-label">Kilom&eacute;trage</label>
                      <input type="number" pattern="\d*" class="form-control" id="KmInput" min="1" max="500000" value=9999 required>
                    </div>
                    <div class="col-md-4">
                      <label for="KmDateInput" class="form-label">Date</label>
                      <input class="form-control" type="date" value="2011-08-19" id="KmDateInput">
                    </div>
                    <div class="col-md-4">
                      <label for="KmDateInput" class="form-label">Ville</label>
                      <input class="form-control" type="text" value="Namur" id="KmCityInput">
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button class="btn btn-info col-12  btn-lg" type="submit" onclick="saveInputValue();" >Enregistrer</button>
                </div>
              </div>
              
            </div>
          </div>
        </div>
        
        
        <!-- <div class="modal fade" id="inputkm_modal" role="dialog">
          <div class="container overflow-hidden" id="inputkm_container">
            <div class="row">
              <div class="col-md-4">
                <label for="KmInput" class="form-label">Kilom&eacute;trage</label>
                <input type="number" pattern="\d*" class="form-control" id="KmInput" min="1" max="500000" value=9999 required>
              </div>
              <div class="col-md-4">
                <label for="KmDateInput" class="form-label">Date</label>
                <input class="form-control" type="date" value="2011-08-19" id="KmDateInput">
              </div>
              <div class="col-md-4">
                <label for="KmDateInput" class="form-label">Ville</label>
                <input class="form-control" type="text" value="Namur" id="KmCityInput">
              </div>
            </div>
            <button class="btn btn-info col-12  btn-lg" type="submit"  onclick="saveInputValue();" >Enregistrer</button>
          </div>
        </div> -->
        
        <!-- <div class="table-title">
          <div class="row">
            <div class="col-sm-8"><h2>Historique des <b>Kilom&eacute;tres</b></h2></div>
            <div class="col-sm-4">
              <button type="button" class="btn btn-info add-new"><i class="fa fa-plus"></i> Ajouter</button>
            </div>
          </div>
        </div> -->
        
        <div class="container overflow-hidden" id="cam_container">
          <!-- <button id="stop-camera">Stop Camera</button> -->
          <video id="video" width="320" height="240" autoplay></video>
          <p></p>
          <div class="btn-group col-12" data-toggle="buttons">          
            <button id="click_photo"  type='button' class="btn btn-info col-12 btn-lg">Capturer les inormations du ticket</button>
          </div>
        </div>
        
        <div id="dataurl_container">
          <canvas id="canvas" width="320" height="240"></canvas>
          <div id="dataurl-header">Image Data URL</div>
          <textarea id="dataurl" readonly></textarea>
        </div>
        
        
        
        
        
        <div class="accordion" id="accordionExample">
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                Historique
              </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                <strong>Voici l'historique:</strong> 	
                <br>
                
                <table class="table table-bordered" id="tableKm">
                  <thead>
                    <tr>
                      <th>Kilom&eacute;tres</th>
                      <th>Date</th>
                      <th>Ville</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody  id="tableKmBody">
                    <tr>
                      <td>100123</td>
                      <td>10-05-2021</td>
                      <td>Bruxelles</td>
                      <td>
                        <a class="add" title="Add" data-toggle="tooltip"><i class="material-icons">&#xE03B;</i></a>
                        <a class="edit" title="Edit" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>
                        <a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>
                      </td>
                    </tr>
                    <tr>
                      <td>100124</td>
                      <td>10-05-2021</td>
                      <td>Namur</td>
                      <td>
                        <a class="add" title="Add" data-toggle="tooltip"><i class="material-icons">&#xE03B;</i></a>
                        <a class="edit" title="Edit" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>
                        <a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>
                      </td>
                    </tr>
                    <tr>
                      <td>100125</td>
                      <td>10-05-2021</td>
                      <td>Hasselt</td>
                      <td>
                        <a class="add" title="Add" data-toggle="tooltip"><i class="material-icons">&#xE03B;</i></a>
                        <a class="edit" title="Edit" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>
                        <a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>
                      </td>
                    </tr>      
                  </tbody>
                </table>
                
                
                <div id="collapseOneInner">
                  <!-- 12323 12/05/2021	<br>
                    12121 	<br>
                    1212	<br>
                    1212	<br>
                    1212	<br>
                    1212	<br>
                    1212	<br>
                    1212	<br> -->
                  </div>
                  
                </div>
                
                <!-- <button type="button" class="btn btn-info">Editer</button> -->
                
              </div>
            </div>            
          </div>
        </form>
      </div>
    </div>
    
    
    
    
    <!-- <script>
      
      let camera_button = document.querySelector("#start_camera");
      let video = document.querySelector("#video");
      let click_button = document.querySelector("#click_photo");
      let canvas = document.querySelector("#canvas");
      let dataurl = document.querySelector("#dataurl");
      let dataurl_container = document.querySelector("#dataurl_container");
      
      camera_button.addEventListener('click', async function() {
        let stream = null;
        
        try {
          stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
        }
        catch(error) {
          alert(error.message);
          return;
        }
        
        video.srcObject = stream;
        
        video.style.display = 'block';
        camera_button.style.display = 'none';
        click_button.style.display = 'block';
      });
      
      click_button.addEventListener('click', function() {
        canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
        let image_data_url = canvas.toDataURL('image/jpeg');
        
        dataurl.value = image_data_url;
        dataurl_container.style.display = 'block';
      });
      
    </script> -->
    
    
    
    
    
    
    
  </body>
  
  
  <script  type = "text/javascript" async=false>
    
    document.getElementById('KmDateInput').value = new Date().toISOString().substring(0, 10);
    
    var rows = [{
      name: "John",
      age: 20,
      email: "xx@hotmail.com"
    }, {
      name: "Jack",
      age: 50,
      email: "xxx@hotmail.com"
    }, {
      name: "Son",
      age: 45,
      email: "xxxx@hotmail.com"
    }];
    
    rows.push({
      name: "John",
      age: 20,
      email: "xx@hotmail.com"
    });
    
    var html = "<table border='1|1'>";
      for (var i = 0; i < rows.length; i++) {
        html+="<tr>";
          html+="<td>"+rows[i].name+"</td>";
          html+="<td>"+rows[i].age+"</td>";
          html+="<td>"+rows[i].email+"</td>";
          
          html+="</tr>";
          
        }
        html+="</table>";
        // document.getElementById("collapseOne").innerHTML = html;
        
      </script>
      
      
      <script src="compteur.js"></script>
      <script src="AddDelete.js"></script>
      <script src="camera.js"></script>
      <script src="ocrad.js"></script>